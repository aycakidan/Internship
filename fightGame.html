<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css">

    <title>Fight Game</title>

    <style>
        body {
            background-color: rgb(109, 106, 106);

        }

        tbody {
            max-height: 150px;
            overflow: auto;
            display: block;
        }

        tr {
            display: table;
            width: 100%;
            table-layout: fixed;
        }

        /* .table-earnings {
            background: #F3F5F6;
        } */

        .firstBtns {
            padding-top: 20px;
            margin-left: 450px;
        }
    </style>



</head>



<body>

    <div class="container pt-3">

        <div class="modal" tabindex="-1" id="myModal">
            <div class="modal-dialog">
                <div class="modal-content">

                    <div class="modal-body">
                        <form autocomplete="off">
                            <label for="player1">Player1 Nickname:</label><br>
                            <input type="text" id="player1">


                            <!-- ikon için??? <i style='font-size:24px' class='fas'>&#xf700;</i> -->
                            <select id="playerIkon1">
                                <option selected>Select Your Icon</option>
                                <option value="0">Snake </option>
                                <option value="1">Dragon</option>
                                <option value="2">Leo</option>
                            </select> <br>

                            <label for="player2">Player2 Nickname:</label><br>
                            <input type="text" id="player2">

                            <select id="playerIkon2">
                                <option selected>Select Your Icon</option>
                                <option value="0">Snake</option>
                                <option value="1">Dragon</option>
                                <option value="2">Leo</option>
                            </select>
                        </form>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                            id="btnCloseModal">Close</button>
                        <button type="button" class="btn btn-secondary" id="btnSaveModal">Save Changes</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- modal for play rules -->
        <div class="modal" tabindex="-1" id="modalRules">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Unutmayın!</h5>
                    </div>
                    <div class="modal-body">
                        <p>Heal can be used only 2 times!</p>
                        <p>Special Attack can be used only 1 times!</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                            id="btnCloseRules">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="firstBtns">
            <button type="button" id="btnStart" class="btn btn-outline-light">Start</button>
            <button type="button" id="btnReset" class="btn btn-outline-light" onClick="refreshPage()">Reset</button>
            <button type="button" id="btnRules" class="btn btn-outline-light">Rules</button>

        </div>


        <div class="container pt-3">
            <div class="row" id="game">
                <div class="col md-6">
                    <!-- label for showing player name -->
                    <label id="playerName1"><strong> Player1</strong></label> <br>
                    <!-- player's hp -->
                    <label id="hp1"><strong>100(hp)</strong> </label>
                    <!-- progress bar -->
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated bg-success"
                            role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" id="pb1">
                        </div>
                    </div><br>
                    <!-- button group for game -->
                    <div id="btnPlayer1">
                        <div class="btn-group" role="group" aria-label="Basic example">
                            <button type="button" class="btn btn-outline-light" id="btnHeal1">Heal</button>
                            <button type="button" class="btn btn-outline-light" id="btnAttack1">Attack</button>
                            <button type="button" class="btn btn-outline-light" id="btnSpecialAttack1">Special
                                Attack</button>
                        </div>

                    </div><br>
                    <!-- <img src="WhatsApp Image 2022-09-08 at 14.36.14.jpeg" alt="" id="player1"> -->


                </div>
                <div class="col md-6">
                    <!-- label for showing player name -->
                    <label id="playerName2"> <strong> Player2</strong></label> <br>
                    <!-- player's hp -->
                    <label id="hp2"><strong>100(hp)</strong></label>
                    <!-- progress bar -->
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated bg-success"
                            role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" id="pb2">
                        </div>
                    </div><br>

                    <!-- button group for game -->
                    <div id="btnPlayer2">
                        <div class="btn-group" role="group" aria-label="Basic example">
                            <button type="button" class="btn btn-outline-light" id="btnHeal2">Heal</button>
                            <button type="button" class="btn btn-outline-light" id="btnAttack2">Attack</button>
                            <button type="button" class="btn btn-outline-light" id="btnSpecialAttack2">Special
                                Attack</button>
                        </div>
                    </div><br>
                    <!-- <img src="WhatsApp Image 2022-09-08 at 15.16.16.jpeg" alt="" id="player2"> -->
                    <br><br><br><br><br>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="table-wrapper">
                                <table class="table table-earnings table-earnings__challenge">
                                    <thead>
                                        <tr>
                                            <th>Player Name</th>
                                            <th>Activity</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="./jquery-3.6.0.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"></script>
    <script>
        var players = [];
        var p1, p2;
        var hp1 = 100;
        var hp2 = 100;
        var playerTurn;
        var ikon1, ikon2;

        $(function () {
            $("#btnStart").on("click", () => {
                $("#myModal").modal('show');
            })
            $("#btnReset").on("click", () => {
                console.log("resetledin")
                window.location.reload();
            })
            $("#btnCloseModal").on("click", () => {
                $("#myModal").modal('hide');
            })
            $("#btnRules").on("click", () => {
                $("#modalRules").modal('show');
            })

            $("#btnCloseRules").on("click", () => {
                $("#modalRules").modal('hide');
            })

            $("#btnSaveModal").on("click", () => {
                players = [];
                // var selectedSubject = $("#SubjectsList option:selected").text();
                p1 = $("#player1").val();
                p2 = $("#player2").val();
                ikon1 = $("#playerIkon1 option:selected").text();
                ikon2 = $("#playerIkon2 option:selected").text();
                players.push(ikon1 + "" + "" + p1);
                players.push(ikon2 + "" + "" + p2);
                console.log(ikon1);
                var random = Math.floor(Math.random() * 2);
                $("#playerName1").text(ikon1 + " " + " " + p1).css("font-weight", " bold");
                $("#playerName2").text(ikon2 + " " + " " + p2).css("font-weight", " bold");

                $("form").hide();
                $("#myModal").modal("hide");
                console.log(players)
            });

            $("#pb1").css("width", hp1 + "%");
            $("#btnHeal1").on("click", () => {
                var uretilenHp1 = 0;
                var p1 = $("#player1").val();
                console.log(hp1);
                if (hp1 < 100) {
                    uretilenHp1 = (Math.floor(Math.random() * 20 - 10) + 10);
                    hp1 += uretilenHp1;
                    $("#pb1").css("width", hp1 + "%");
                } else {
                    hp1;
                }
                $("#hp1").text(hp1 + "(hp)").css("font-weight", " bold");

                if (hp1 <= 100 && hp1 >= 75) {
                    $("#pb1").attr("class", " progress-bar-striped progress-bar-animated bg-success")
                } else if (hp1 < 75 && hp1 >= 50) {
                    $("#pb1").attr("class", " progress-bar-striped progress-bar-animated bg-info")
                } else if (hp1 < 50 && hp1 >= 25) {
                    $("#pb1").attr("class", " progress-bar-striped progress-bar-animated bg-warning")
                } else if (hp1 < 25 && hp1 >= 0) {
                    $("#pb1").attr("class", " progress-bar-striped progress-bar-animated bg-danger")
                }else {
                    hp1;
                }
                $("#btnHeal1").one("click", () => {
                    $("#btnHeal1").hide();
                });
                $("tbody").prepend("<tr><td>" + p1 + "</td><td> heal (" + uretilenHp1 + ")")

            });
            $("#pb2").css("width", hp2 + "%");

            $("#btnAttack1").on("click", () => {
                var attack1 = 0;
                var p1 = $("#player1").val();

                console.log(attack1);
                if (hp2 <= 100) {
                    attack1 = (Math.floor(Math.random() * 20 - 10) + 10);
                    hp2 -= attack1;
                    $("#pb2").css("width", hp2 + "%");
                } else {
                    hp2;
                }
                $("#hp2").text(hp2 + "(hp)").css("font-weight", " bold");

                if (hp2 <= 100 && hp2 >= 75) {
                    $("#pb2").attr("class", " progress-bar-striped progress-bar-animated bg-success")
                } else if (hp2 < 75 && hp2 >= 50) {
                    $("#pb2").attr("class", " progress-bar-striped progress-bar-animated bg-info")
                } else if (hp2 < 50 && hp2 >= 25) {
                    $("#pb2").attr("class", " progress-bar-striped progress-bar-animated bg-warning")
                } else if (hp2 < 25 && hp2 >= 0) {
                    $("#pb2").attr("class", " progress-bar-striped progress-bar-animated bg-danger")
                }
                else {
                    hp2;
                }
                $("tbody").prepend("<tr><td>" + p1 + "</td><td> attack (" + attack1 + ")")

            });
            $("#pb2").css("width", hp2 + "%");

            $("#btnSpecialAttack1").one("click", () => {
                console.log(hp2);
                var attackSpecial1 = 0;
                var p1 = $("#player1").val();

                if (hp2 <= 100) {
                    attackSpecial1 = (Math.floor(Math.random() * 40 - 25) + 25);
                    hp2 -= attackSpecial1
                    $("#pb2").css("width", hp2 + "%");
                } else {
                    hp2;
                }
                $("#hp2").text(hp2 + "(hp)").css("font-weight", " bold");

                if (hp2 <= 100 && hp2 >= 75) {
                    $("#pb2").attr("class", " progress-bar-striped progress-bar-animated bg-success")
                } else if (hp2 < 75 && hp2 >= 50) {
                    $("#pb2").attr("class", " progress-bar-striped progress-bar-animated bg-info")
                } else if (hp2 < 50 && hp2 >= 25) {
                    $("#pb2").attr("class", " progress-bar-striped progress-bar-animated bg-warning")
                } else if (hp2 < 25 && hp2 >= 0) {
                    $("#pb2").attr("class", " progress-bar-striped progress-bar-animated bg-danger")
                }
                else {
                    hp2;
                }
                $("#btnSpecialAttack1").hide();
                $("tbody").prepend("<tr><td>" + p1 + "</td><td> special attack (" + attackSpecial1 + ")")
                console.log(attackSpecial1);
            });

            
            // player2

            $("#pb2").css("width", hp2 + "%");
            $("#btnHeal2").on("click", () => {
                var uretilenHp2 = 0;
                var p2 = $("#player2").val();

                console.log(hp2 + "heal")
                if (hp2 < 100) {
                    uretilenHp2 = (Math.floor(Math.random() * 20 - 10) + 10);
                    hp2 += uretilenHp2;
                    $("#pb2").css("width", hp2 + "%");
                } else {
                    hp2;
                }
                $("#hp2").text(hp2 + "(hp)").css("font-weight", " bold");

                if (hp2 <= 100 && hp2 >= 75) {
                    $("#pb2").attr("class", " progress-bar-striped progress-bar-animated bg-success")
                } else if (hp2 < 75 && hp2 >= 50) {
                    $("#pb2").attr("class", " progress-bar-striped progress-bar-animated bg-info")
                } else if (hp2 < 50 && hp2 >= 25) {
                    $("#pb2").attr("class", " progress-bar-striped progress-bar-animated bg-warning")
                } else if (hp2 < 25 && hp2 >= 0) {
                    $("#pb2").attr("class", " progress-bar-striped progress-bar-animated bg-danger")
                }
                else {
                    hp2;
                }
                $("#btnHeal2").on("click", () => {
                    $("#btnHeal2").hide();
                });

                $("tbody").prepend("<tr><td>" + p2 + "</td><td> heal(" + uretilenHp2 + ")")
            });



            $("#pb2").css("width", hp1 + "%");

            $("#btnAttack2").on("click", () => {
                console.log(hp1);
                var attack2 = 0;
                var p2 = $("#player2").val();

                if (hp1 <= 100) {
                    attack2 = (Math.floor(Math.random() * 20 - 10) + 10);
                    hp1 -= attack2;
                    $("#pb1").css("width", hp1 + "%");
                } else {
                    hp1;
                }
                $("#hp1").text(hp1 + "(hp)").css("font-weight", " bold");

                if (hp1 <= 100 && hp1 >= 75) {
                    $("#pb1").attr("class", " progress-bar-striped progress-bar-animated bg-success")
                } else if (hp1 < 75 && hp1 >= 50) {
                    $("#pb1").attr("class", " progress-bar-striped progress-bar-animated bg-info")
                } else if (hp1 < 50 && hp1 >= 25) {
                    $("#pb1").attr("class", " progress-bar-striped progress-bar-animated bg-warning")
                } else if (hp1 < 25 && hp1 >= 0) {
                    $("#pb1").attr("class", " progress-bar-striped progress-bar-animated bg-danger")
                }
                else {
                    hp1;
                }
                $("tbody").prepend("<tr><td>" + p2 + "</td><td> attack (" + attack2 + ")")
                console.log(attack2);

            });

            $("#pb1").css("width", hp1 + "%");
            $("#btnSpecialAttack2").one("click", () => {
                console.log(hp1);
                var attackSpecial2 = 0;
                var p2 = $("#player2").val();
                if (hp1 <= 100) {
                    attackSpecial2 = (Math.floor(Math.random() * 40 - 25) + 25);
                    hp1 -= attackSpecial2;
                    $("#pb1").css("width", hp1 + "%");
                } else {
                    hp1;
                }
                $("#hp1").text(hp1 + "(hp)").css("font-weight", " bold");

                if (hp1 <= 100 && hp1 >= 75) {
                    $("#pb1").attr("class", " progress-bar-striped progress-bar-animated bg-success")
                } else if (hp1 < 75 && hp1 >= 50) {
                    $("#pb1").attr("class", " progress-bar-striped progress-bar-animated bg-info")
                } else if (hp1 < 50 && hp1 >= 25) {
                    $("#pb1").attr("class", " progress-bar-striped progress-bar-animated bg-warning")
                } else if (hp1 < 25 && hp1 >= 0) {
                    $("#pb1").attr("class", " progress-bar-striped progress-bar-animated bg-danger")
                }
                else {
                    hp1;
                }
                $("#btnSpecialAttack2").hide();
                $("tbody").prepend("<tr><td>" + p2 + "</td><td> special attack (" + attackSpecial2 + ")")
                console.log(attackSpecial2);

            });


            // make the player's buttons' disable       

            var random = (Math.floor(Math.random() * 2));
            playerTurn = random;

            if (playerTurn === 0) {

                $("#btnPlayer1").on("click", (e) => {
                    var player1 = $(e.currentTarget);
                })

                $("#btnPlayer2").css("visibility", "hidden");

            } else {
                $("#btnPlayer1").css("visibility", "hidden");
            }

            $("#btnPlayer1").on("click", (e) => {
                $("#btnPlayer1").css("visibility", "hidden");
                $("#btnPlayer2").css("visibility", "visible");

            })
            $("#btnPlayer2").on("click", (e) => {
                $("#btnPlayer2").css("visibility", "hidden");
                $("#btnPlayer1").css("visibility", "visible");

            })

        });



    </script>
</body>

</html>